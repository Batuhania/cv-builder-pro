/**
 * CV PRO - Internationalization Module
 * Complete translation dictionary with UI strings and mock data
 */

const Translations = {
    // ============================================
    // ENGLISH (Default)
    // ============================================
    en: {
        // Section Headers
        sections: {
            contact: "Contact",
            skills: "Skills",
            languages: "Languages",
            hobbies: "Hobbies",
            summary: "Summary",
            experience: "Experience",
            education: "Education",
            certifications: "Projects & Certifications",
            references: "References"
        },
        // Buttons & Actions
        buttons: {
            add: "+",
            delete: "Delete",
            reset: "Reset",
            downloadJson: "<i class='fas fa-download'></i> Download JSON",
            uploadJson: "<i class='fas fa-upload'></i> Upload JSON",
            downloadPdf: "<i class='fas fa-file-pdf'></i> Download",
            sections: "Sections",
            menuPhoto: "Photo",
            menuCerts: "Projects/Certs",
            menuHobbies: "Hobbies",
            menuRefs: "References",
            changePhoto: "Change",
            removePhoto: "Remove",
            savePhoto: "Save",
            close: "Close",
            preview: "Preview",
            edit: "Edit",
            install: "Install App"
        },
        // Notifications & Alerts
        notifications: {
            saved: "Saved!",
            added: "Added!",
            deleted: "Deleted!",
            resetConfirm: "All data will be deleted. Are you sure?",
            resetDone: "Reset!",
            jsonDownloaded: "JSON downloaded!",
            cvLoaded: "CV loaded!",
            invalidFile: "Invalid file!",
        },

        // UI Elements
        ui: {
            toolbarHint: "*Auto-saved â€¢ Ctrl+S to save â€¢ Drag-drop to reorder",
            photoDrag: "Drag photo here or click to select",
            photoLimit: "Max 2MB â€¢ JPEG, PNG, GIF, WEBP",
            photoAdd: "Add Photo",
            loading: "Loading...",
            pdfProgress: "Generating PDF...",
            buyButton: "ğŸš€ Lifetime Access $9.99 (Simulated)",
            // Tooltips
            bold: "Bold (Ctrl+B)",
            italic: "Italic (Ctrl+I)",
            underline: "Underline (Ctrl+U)",
            fontLarge: "Large",
            fontNormal: "Normal",
            fontSmall: "Small",
            pdfDownload: "Download PDF"
        },
        // Theme Names
        themes: {
            classic: "Classic",
            modern: "Modern",
            creative: "Creative",
            professional: "Professional",
            academic: "ğŸ“ Academic",
            corporate: "ğŸ¢ Corporate",
            ivy: "ğŸ›ï¸ Ivy League",
            elegant: "ğŸ–‹ï¸ Elegant",
            minimal: "âœ¨ Minimalist",
            tech: "ğŸ’» Tech",
            modernTheme: "ğŸŒˆ Modern",
            creativeTheme: "ğŸ¨ Creative",
            gamer: "ğŸ‘¾ 8-Bit Gamer",
            terminal: "ğŸ‘¨â€ğŸ’» Terminal / Matrix",
            brutalist: "ğŸ¨ Brutalist Pop",
            daily: "ğŸ“° The Daily",
            blueprint: "ğŸ“ Blueprint",
            sketchbook: "âœï¸ Sketchbook",
            cyberpunk: "ğŸ”® Cyberpunk",
            softGray: "â˜ï¸ Soft Gray",
            skyBlue: "ğŸ’ Sky Blue",
            executive: "ğŸ‘” Executive",
            navyPro: "ğŸŸ¦ Navy Pro",
            sharpMinimal: "â¬› Sharp Minimal",
            royal: "ğŸ‘‘ Royal",
            modernPro: "âœ¨ Modern Pro",
            dark: "ğŸŒ™ Dark Mode",
            gold: "ğŸ‘‘ Gold"
        },
        // Mock/Sample Data for New Users
        mock: {
            fullName: "John Doe",
            title: "Software Engineer",
            location: "New York, USA",
            phone: "+1 555 123 4567",
            email: "john.doe@example.com",
            linkedin: "linkedin.com/in/johndoe",
            summary: "Experienced software engineer with a passion for building scalable web applications. Skilled in modern technologies and agile methodologies.",
            skill1: "JavaScript / React",
            skill2: "Python / Django",
            skill3: "Database Design",
            lang1: "English",
            lang1Level: "Native",
            lang2: "Spanish",
            lang2Level: "B2 - Intermediate",
            jobTitle: "Senior Developer",
            jobCompany: "Tech Corp Inc.",
            jobStart: "2020",
            jobEnd: "Present",
            jobDesc1: "Led development of microservices architecture.",
            jobDesc2: "Mentored junior developers and conducted code reviews.",
            eduDegree: "B.S. Computer Science",
            eduSchool: "MIT",
            eduStart: "2014",
            eduEnd: "2018",
            certName: "AWS Solutions Architect",
            certIssuer: "Amazon Web Services",
            certDate: "2023",
            hobby1: "Photography",
            hobby2: "Hiking",
            references: "Available upon request."
        },
    },
    // Premium System

    // ============================================
    // TURKISH
    // ============================================
    tr: {
        sections: {
            contact: "Ä°letiÅŸim",
            skills: "Beceriler",
            languages: "Diller",
            hobbies: "Hobiler",
            summary: "Ã–zet",
            experience: "Ä°ÅŸ Deneyimi",
            education: "EÄŸitim",
            certifications: "Projeler & Sertifikalar",
            references: "Referanslar"
        },
        buttons: {
            add: "+",
            delete: "Sil",
            reset: "SÄ±fÄ±rla",
            downloadJson: "<i class='fas fa-download'></i> JSON Ä°ndir",
            uploadJson: "<i class='fas fa-upload'></i> JSON YÃ¼kle",
            downloadPdf: "<i class='fas fa-file-pdf'></i> Ä°ndir",
            sections: "BÃ¶lÃ¼mler",
            menuPhoto: "FotoÄŸraf",
            menuCerts: "Projeler/Sertifikalar",
            menuHobbies: "Hobiler",
            menuRefs: "Referanslar",
            changePhoto: "DeÄŸiÅŸtir",
            removePhoto: "KaldÄ±r",
            savePhoto: "Kaydet",
            close: "Kapat",
            preview: "Ã–nizle",
            edit: "DÃ¼zenle",
            install: "UygulamayÄ± YÃ¼kle"
        },
        notifications: {
            saved: "Kaydedildi!",
            added: "Eklendi!",
            deleted: "Silindi!",
            resetConfirm: "TÃ¼m veriler silinecek. Emin misiniz?",
            resetDone: "SÄ±fÄ±rlandÄ±!",
            jsonDownloaded: "JSON indirildi!",
            cvLoaded: "CV yÃ¼klendi!",
            invalidFile: "GeÃ§ersiz dosya!",
        },
        ui: {
            toolbarHint: "*Otomatik kaydedilir â€¢ Ctrl+S ile kaydet â€¢ SÃ¼rÃ¼kle-bÄ±rak ile sÄ±rala",
            photoDrag: "FotoÄŸrafÄ± sÃ¼rÃ¼kleyin veya seÃ§mek iÃ§in tÄ±klayÄ±n",
            photoLimit: "Max 2MB â€¢ JPEG, PNG, GIF, WEBP",
            photoAdd: "FotoÄŸraf Ekle",
            loading: "YÃ¼kleniyor...",
            pdfProgress: "PDF oluÅŸturuluyor...",
            buyButton: "ğŸš€ Ã–mÃ¼r Boyu Sadece 99â‚º (SimÃ¼le)",
            // Tooltips
            bold: "KalÄ±n (Ctrl+B)",
            italic: "Ä°talik (Ctrl+I)",
            underline: "AltÄ± Ã‡izili (Ctrl+U)",
            fontLarge: "BÃ¼yÃ¼k",
            fontNormal: "Normal",
            fontSmall: "KÃ¼Ã§Ã¼k",
            pdfDownload: "PDF Ä°ndir"
        },
        // Theme Names
        themes: {
            classic: "Klasik",
            modern: "Modern",
            creative: "YaratÄ±cÄ±",
            professional: "Profesyonel",
            academic: "ğŸ“ Akademik",
            corporate: "ğŸ¢ Kurumsal",
            ivy: "ğŸ›ï¸ Ivy League",
            elegant: "ğŸ–‹ï¸ Zarif",
            minimal: "âœ¨ Minimalist",
            tech: "ğŸ’» Teknoloji",
            modernTheme: "ğŸŒˆ Modern",
            creativeTheme: "ğŸ¨ YaratÄ±cÄ±",
            gamer: "ğŸ‘¾ 8-Bit Oyuncu",
            terminal: "ğŸ‘¨â€ğŸ’» Terminal / Matrix",
            brutalist: "ğŸ¨ Brutalist Pop",
            daily: "ğŸ“° Gazete",
            blueprint: "ğŸ“ Mimar",
            sketchbook: "âœï¸ Eskiz Defteri",
            cyberpunk: "ğŸ”® Siberpunk",
            softGray: "â˜ï¸ Ferah Gri",
            skyBlue: "ğŸ’ GÃ¶kyÃ¼zÃ¼",
            executive: "ğŸ‘” YÃ¶netici",
            navyPro: "ğŸŸ¦ Lacivert Pro",
            sharpMinimal: "â¬› Keskin Minimal",
            royal: "ğŸ‘‘ Asil",
            modernPro: "âœ¨ Modern Pro",
            dark: "ğŸŒ™ KaranlÄ±k Mod",
            gold: "ğŸ‘‘ AltÄ±n"
        },
        mock: {
            fullName: "Ad Soyad",
            title: "Unvan / Pozisyon",
            location: "Åehir, Ãœlke",
            phone: "+90 5XX XXX XX XX",
            email: "email@ornek.com",
            linkedin: "linkedin.com/in/username",
            summary: "Kariyer hedeflerinizi, uzmanlÄ±k alanlarÄ±nÄ±zÄ± ve Ã¶ne Ã§Ä±kan Ã¶zelliklerinizi Ã¶zetleyen kÄ±sa bir yazÄ± buraya gelecek.",
            skill1: "Python / Yapay Zeka",
            skill2: "Web GeliÅŸtirme",
            skill3: "Veri Analizi",
            lang1: "TÃ¼rkÃ§e",
            lang1Level: "Anadil",
            lang2: "Ä°ngilizce",
            lang2Level: "C1 - Advanced",
            jobTitle: "Pozisyon / Unvan",
            jobCompany: "Åirket / Kurum AdÄ±",
            jobStart: "2020",
            jobEnd: "GÃ¼nÃ¼mÃ¼z",
            jobDesc1: "GerÃ§ekleÅŸtirilen Ã¶nemli proje veya gÃ¶rev.",
            jobDesc2: "Elde edilen baÅŸarÄ± veya katkÄ±.",
            eduDegree: "Lisans - BÃ¶lÃ¼m AdÄ±",
            eduSchool: "Ãœniversite AdÄ±",
            eduStart: "2015",
            eduEnd: "2019",
            certName: "Proje veya Sertifika AdÄ±",
            certIssuer: "Kurum / Platform",
            certDate: "2024",
            hobby1: "Seyahat Etmek",
            hobby2: "FotoÄŸrafÃ§Ä±lÄ±k",
            references: "Ä°stek Ã¼zerine saÄŸlanacaktÄ±r."
        }
    },

    // ============================================
    // GERMAN
    // ============================================
    de: {
        sections: {
            contact: "Kontakt",
            skills: "FÃ¤higkeiten",
            languages: "Sprachen",
            hobbies: "Hobbys",
            summary: "Profil",
            experience: "Berufserfahrung",
            education: "Ausbildung",
            certifications: "Projekte & Zertifikate",
            references: "Referenzen"
        },
        buttons: {
            add: "+",
            delete: "LÃ¶schen",
            reset: "ZurÃ¼cksetzen",
            downloadJson: "<i class='fas fa-download'></i> JSON Herunterladen",
            uploadJson: "<i class='fas fa-upload'></i> JSON Hochladen",
            downloadPdf: "<i class='fas fa-file-pdf'></i> Herunterladen",
            sections: "Abschnitte",
            menuPhoto: "Foto",
            menuCerts: "Projekte/Zert.",
            menuHobbies: "Hobbys",
            menuRefs: "Referenzen",
            changePhoto: "Ã„ndern",
            removePhoto: "Entfernen",
            savePhoto: "Speichern",
            close: "SchlieÃŸen",
            preview: "Vorschau",
            edit: "Bearbeiten",
            install: "App installieren"
        },
        notifications: {
            saved: "Gespeichert!",
            added: "HinzugefÃ¼gt!",
            deleted: "GelÃ¶scht!",
            resetConfirm: "Alle Daten werden gelÃ¶scht. Sind Sie sicher?",
            resetDone: "ZurÃ¼ckgesetzt!",
            jsonDownloaded: "JSON heruntergeladen!",
            cvLoaded: "CV geladen!",
        },

        ui: {
            toolbarHint: "*Automatisch gespeichert â€¢ Strg+S speichern â€¢ Drag & Drop sortieren",
            photoDrag: "Foto hierher ziehen oder klicken",
            photoLimit: "Max 2MB â€¢ JPEG, PNG, GIF, WEBP",
            loading: "Laden...",
            pdfProgress: "PDF wird erstellt...",
            buyButton: "ğŸš€ Lebenslanger Zugang 9,99â‚¬ (Simuliert)"
        },
        themes: {
            classic: "Klassisch",
            modern: "Modern",
            creative: "Kreativ",
            professional: "Professionell",
            academic: "ğŸ“ Akademik",
            corporate: "ğŸ¢ Corporate",
            ivy: "ğŸ›ï¸ Ivy League",
            elegant: "ğŸ–‹ï¸ Elegant",
            minimal: "âœ¨ Minimalist",
            tech: "ğŸ’» Tech",
            modernTheme: "ğŸŒˆ Modern",
            creativeTheme: "ğŸ¨ Creative",
            gamer: "ğŸ‘¾ 8-Bit Gamer",
            terminal: "ğŸ‘¨â€ğŸ’» Terminal / Matrix",
            brutalist: "ğŸ¨ Brutalist Pop",
            daily: "ğŸ“° The Daily",
            blueprint: "ğŸ“ Blueprint",
            sketchbook: "âœï¸ Sketchbook",
            cyberpunk: "ğŸ”® Cyberpunk",
            softGray: "â˜ï¸ Soft Gray",
            skyBlue: "ğŸ’ Sky Blue",
            executive: "ğŸ‘” Executive",
            navyPro: "ğŸŸ¦ Navy Pro",
            sharpMinimal: "â¬› Sharp Minimal",
            royal: "ğŸ‘‘ Royal",
            modernPro: "âœ¨ Modern Pro",
            dark: "ğŸŒ™ Dark Mode",
            gold: "ğŸ‘‘ Gold"
        },
        mock: {
            fullName: "Max Mustermann",
            title: "Software-Ingenieur",
            location: "Berlin, Deutschland",
            phone: "+49 123 456 7890",
            email: "max.mustermann@beispiel.de",
            linkedin: "linkedin.com/in/maxmustermann",
            summary: "Erfahrener Software-Ingenieur mit Leidenschaft fÃ¼r skalierbare Webanwendungen.",
            skill1: "JavaScript / React",
            skill2: "Python / Django",
            skill3: "Datenbank-Design",
            lang1: "Deutsch",
            lang1Level: "Muttersprache",
            lang2: "Englisch",
            lang2Level: "C1 - Fortgeschritten",
            jobTitle: "Senior Entwickler",
            jobCompany: "Tech GmbH",
            jobStart: "2020",
            jobEnd: "Heute",
            jobDesc1: "Entwicklung von Microservices-Architektur.",
            jobDesc2: "Mentoring von Junior-Entwicklern.",
            eduDegree: "B.Sc. Informatik",
            eduSchool: "TU Berlin",
            eduStart: "2014",
            eduEnd: "2018",
            certName: "AWS Solutions Architect",
            certIssuer: "Amazon Web Services",
            certDate: "2023",
            hobby1: "Fotografie",
            hobby2: "Wandern",
            references: "Auf Anfrage verfÃ¼gbar."
        },
    },

    // ============================================
    // SPANISH
    // ============================================
    es: {
        sections: {
            contact: "Contacto",
            skills: "Habilidades",
            languages: "Idiomas",
            hobbies: "Aficiones",
            summary: "Resumen",
            experience: "Experiencia",
            education: "EducaciÃ³n",
            certifications: "Proyectos y Certificados",
            references: "Referencias"
        },
        buttons: {
            add: "+",
            delete: "Eliminar",
            reset: "Reiniciar",
            downloadJson: "<i class='fas fa-download'></i> Descargar JSON",
            uploadJson: "<i class='fas fa-upload'></i> Subir JSON",
            downloadPdf: "<i class='fas fa-file-pdf'></i> Descargar",
            sections: "Secciones",
            menuPhoto: "Foto",
            menuCerts: "Proyectos/Cert.",
            menuHobbies: "Aficiones",
            menuRefs: "Referencias",
            changePhoto: "Cambiar",
            removePhoto: "Eliminar",
            savePhoto: "Guardar",
            close: "Cerrar",
            preview: "Vista previa",
            edit: "Editar",
            install: "Instalar App"
        },
        notifications: {
            saved: "Â¡Guardado!",
            added: "Â¡AÃ±adido!",
            deleted: "Â¡Eliminado!",
            resetConfirm: "Todos los datos serÃ¡n eliminados. Â¿EstÃ¡ seguro?",
            resetDone: "Â¡Reiniciado!",
            jsonDownloaded: "Â¡JSON descargado!",
            cvLoaded: "Â¡CV cargado!",
            invalidFile: "Â¡Archivo invÃ¡lido!",
        },

        ui: {
            toolbarHint: "*Guardado automÃ¡tico â€¢ Ctrl+S guardar â€¢ Arrastrar para ordenar",
            photoDrag: "Arrastra la foto o haz clic para seleccionar",
            photoLimit: "Max 2MB â€¢ JPEG, PNG, GIF, WEBP",
            loading: "Cargando...",
            pdfProgress: "Generando PDF...",
            buyButton: "ğŸš€ Acceso de por vida 9,99â‚¬ (Simulado)"
        },
        mock: {
            fullName: "Juan GarcÃ­a",
            title: "Ingeniero de Software",
            location: "Madrid, EspaÃ±a",
            phone: "+34 612 345 678",
            email: "juan.garcia@ejemplo.es",
            linkedin: "linkedin.com/in/juangarcia",
            summary: "Ingeniero de software con experiencia en aplicaciones web escalables y metodologÃ­as Ã¡giles.",
            skill1: "JavaScript / React",
            skill2: "Python / Django",
            skill3: "DiseÃ±o de Bases de Datos",
            lang1: "EspaÃ±ol",
            lang1Level: "Nativo",
            lang2: "InglÃ©s",
            lang2Level: "B2 - Intermedio Alto",
            jobTitle: "Desarrollador Senior",
            jobCompany: "Tech Corp S.L.",
            jobStart: "2020",
            jobEnd: "Presente",
            jobDesc1: "Desarrollo de arquitectura de microservicios.",
            jobDesc2: "MentorÃ­a de desarrolladores junior.",
            eduDegree: "Grado en InformÃ¡tica",
            eduSchool: "Universidad PolitÃ©cnica",
            eduStart: "2014",
            eduEnd: "2018",
            certName: "AWS Solutions Architect",
            certIssuer: "Amazon Web Services",
            certDate: "2023",
            hobby1: "FotografÃ­a",
            hobby2: "Senderismo",
            references: "Disponible bajo peticiÃ³n."
        },
    },

    // ============================================
    // FRENCH
    // ============================================
    fr: {
        sections: {
            contact: "Contact",
            skills: "CompÃ©tences",
            languages: "Langues",
            hobbies: "Loisirs",
            summary: "RÃ©sumÃ©",
            experience: "ExpÃ©rience",
            education: "Formation",
            certifications: "Projets & Certificats",
            references: "RÃ©fÃ©rences"
        },
        buttons: {
            add: "+",
            delete: "Supprimer",
            reset: "RÃ©initialiser",
            downloadJson: "<i class='fas fa-download'></i> TÃ©lÃ©charger JSON",
            uploadJson: "<i class='fas fa-upload'></i> Importer JSON",
            downloadPdf: "<i class='fas fa-file-pdf'></i> TÃ©lÃ©charger",
            sections: "Sections",
            menuPhoto: "Photo",
            menuCerts: "Projets/Cert.",
            menuHobbies: "Loisirs",
            menuRefs: "RÃ©fÃ©rences",
            changePhoto: "Changer",
            removePhoto: "Supprimer",
            savePhoto: "Enregistrer",
            close: "Fermer",
            preview: "AperÃ§u",
            edit: "Modifier",
            install: "Installer l'app"
        },
        notifications: {
            saved: "EnregistrÃ© !",
            added: "AjoutÃ© !",
            deleted: "SupprimÃ© !",
            resetConfirm: "Toutes les donnÃ©es seront supprimÃ©es. ÃŠtes-vous sÃ»r ?",
            resetDone: "RÃ©initialisÃ© !",
            jsonDownloaded: "JSON tÃ©lÃ©chargÃ© !",
            cvLoaded: "CV chargÃ© !",
            invalidFile: "Fichier invalide !",
        },

        ui: {
            toolbarHint: "*Sauvegarde auto â€¢ Ctrl+S sauvegarder â€¢ Glisser-dÃ©poser pour trier",
            photoDrag: "Glissez la photo ou cliquez pour sÃ©lectionner",
            photoLimit: "Max 2MB â€¢ JPEG, PNG, GIF, WEBP",
            loading: "Chargement...",
            pdfProgress: "CrÃ©ation du PDF...",
            buyButton: "ğŸš€ AccÃ¨s Ã  vie 9,99â‚¬ (SimulÃ©)"
        },
        mock: {
            fullName: "Jean Dupont",
            title: "IngÃ©nieur Logiciel",
            location: "Paris, France",
            phone: "+33 6 12 34 56 78",
            email: "jean.dupont@exemple.fr",
            linkedin: "linkedin.com/in/jeandupont",
            summary: "IngÃ©nieur logiciel expÃ©rimentÃ© passionnÃ© par les applications web Ã©volutives.",
            skill1: "JavaScript / React",
            skill2: "Python / Django",
            skill3: "Conception de Bases de DonnÃ©es",
            lang1: "FranÃ§ais",
            lang1Level: "Langue maternelle",
            lang2: "Anglais",
            lang2Level: "C1 - AvancÃ©",
            jobTitle: "DÃ©veloppeur Senior",
            jobCompany: "Tech Corp SARL",
            jobStart: "2020",
            jobEnd: "Aujourd'hui",
            jobDesc1: "DÃ©veloppement d'architecture microservices.",
            jobDesc2: "Mentorat des dÃ©veloppeurs juniors.",
            eduDegree: "Licence Informatique",
            eduSchool: "UniversitÃ© Paris-Saclay",
            eduStart: "2014",
            eduEnd: "2018",
            certName: "AWS Solutions Architect",
            certIssuer: "Amazon Web Services",
            certDate: "2023",
            hobby1: "Photographie",
            hobby2: "RandonnÃ©e",
            references: "Disponibles sur demande."
        },
    }

};

// ============================================
// I18N ENGINE
// ============================================
const I18n = {
    lang: 'en', // Default

    /**
     * Initialize - detect browser language or restore from storage
     */
    init() {
        try {
            const saved = localStorage.getItem('cv_lang');
            if (saved && Translations[saved]) {
                this.lang = saved;
            } else {
                const browser = navigator.language.split('-')[0];
                this.lang = Translations[browser] ? browser : 'en';
            }
        } catch (e) {
            console.error('Language init failed (using default):', e);
            this.lang = 'en';
        }
        // Sync dropdown if it exists
        const sel = document.getElementById('lang-select');
        if (sel) sel.value = this.lang;
    },

    /**
     * Set language and optionally reload data
     */
    setLang(lang) {
        if (!Translations[lang]) return;
        this.lang = lang;
        try {
            localStorage.setItem('cv_lang', lang);
        } catch (e) { /* ignore */ }

        // Update UI elements with data-i18n
        this.translatePage();

        // Re-render CV content
        if (window.CVRenderer && window.CVState) {
            CVRenderer.render(CVState.get(), document.getElementById('cv-content'));
        }
    },

    /**
     * Get translation by dot-path
     */
    t(path) {
        const getVal = (lang, keys) => {
            let val = Translations[lang];
            for (const k of keys) {
                if (val === undefined) return undefined;
                val = val[k];
            }
            return val;
        };

        const keys = path.split('.');
        let val = getVal(this.lang, keys);

        // Fallback to English if missing
        if (val === undefined && this.lang !== 'en') {
            val = getVal('en', keys);
        }

        return val !== undefined ? val : path;
    },

    /**
     * Translate all elements with data-i18n attributes
     */
    translatePage() {
        // 1. Standard data-i18n innerHTML
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (key) el.innerHTML = this.t(key);
        });

        // 2. Titles (tooltips)
        document.querySelectorAll('[data-i18n-title]').forEach(el => {
            const key = el.getAttribute('data-i18n-title');
            if (key) el.title = this.t(key);
        });

        // 3. Optgroup labels
        document.querySelectorAll('optgroup[data-i18n-label]').forEach(el => {
            const key = el.getAttribute('data-i18n-label');
            if (key) el.label = this.t(key);
        });

        // 4. Theme selector options - translate based on value
        const themeSelect = document.getElementById('theme-select');
        if (themeSelect) {
            // Translate optgroup labels
            const themeGroups = {
                'Klasik': 'themes.classic',
                'Modern': 'themes.modern',
                'YaratÄ±cÄ±': 'themes.creative',
                'Profesyonel': 'themes.professional'
            };
            themeSelect.querySelectorAll('optgroup').forEach(og => {
                const origLabel = og.getAttribute('data-orig-label') || og.label;
                og.setAttribute('data-orig-label', origLabel);
                // Map to translation key
                const key = themeGroups[origLabel];
                if (key) og.label = this.t(key);
            });

            // Translate individual options based on value
            const valueMap = {
                'academic': 'themes.academic',
                'corporate': 'themes.corporate',
                'ivy': 'themes.ivy',
                'elegant': 'themes.elegant',
                'minimal': 'themes.minimal',
                'tech': 'themes.tech',
                'modern': 'themes.modernTheme',
                'creative': 'themes.creative',
                'gamer-8bit': 'themes.gamer',
                'terminal': 'themes.terminal',
                'brutalist': 'themes.brutalist',
                'daily': 'themes.daily',
                'blueprint': 'themes.blueprint',
                'sketchbook': 'themes.sketchbook',
                'cyberpunk': 'themes.cyberpunk',
                'soft-gray': 'themes.softGray',
                'sky-blue': 'themes.skyBlue',
                'executive': 'themes.executive',
                'navy-pro': 'themes.navyPro',
                'sharp-minimal': 'themes.sharpMinimal',
                'royal': 'themes.royal',
                'modern-pro': 'themes.modernPro',
                'dark': 'themes.dark',
                'gold': 'themes.gold'
            };
            themeSelect.querySelectorAll('option').forEach(opt => {
                const key = valueMap[opt.value];
                if (key) opt.innerText = this.t(key);
            });
        }

        // 5. Photo placeholder (if rendered)
        const photoPlaceholder = document.querySelector('.photo-placeholder span');
        if (photoPlaceholder) {
            photoPlaceholder.innerText = this.t('ui.photoAdd');
        }

        // 6. Sync language selector
        const langSelect = document.getElementById('lang-select');
        if (langSelect && langSelect.value !== this.lang) {
            langSelect.value = this.lang;
        }
    }
}

// Initialize immediately (before data.js loads)
I18n.init();

// Expose globally
window.I18n = I18n;
window.Translations = Translations;
